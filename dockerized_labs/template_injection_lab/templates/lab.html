{% extends "base.html" %}

{% block title %}<title>Template Injection Lab</title>{% endblock %}

{% block content %}
<div class="box">
    <h3>My Blog Posts</h3>

    <div class="section">
        <h4>Create New Post</h4>
        <form method="POST" action="/create_blog">
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" placeholder="Enter post title">
            </div>
            <div class="form-group">
                <label for="content">Blog Content:</label>
                <textarea id="content" name="content" rows="6" placeholder="Write your blog post here..."></textarea>
            </div>
            <button type="submit">Create Post</button>
        </form>
    </div>

    <div class="section">
        <h4>Posts</h4>
        <ul class="blog-list">
            {% for post in posts %}
            <li>
                <a href="{{ url_for('view_blog', filename=post.filename) }}">{{ post.title }}</a>
            </li>
            {% else %}
            <li>No posts yet.</li>
            {% endfor %}
        </ul>
    </div>

    <div class="button-container">
        <button onclick="window.location.href='/'">Back to Lab Details</button>
    </div>
</div>

<script>
    function toggleLabDetails(id) {
        const el = document.getElementById(id);
        if (el.style.display === "none" || el.style.display === "") {
            el.style.display = "block";
        } else {
            el.style.display = "none";
        }
    }
</script>
{% endblock %}
